<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Regiustro de Alumnos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background-color: #fe7dd3;
      height: 100vh;
    }

    .floating-card {
      max-width: 46rem;
      position: absolute;
      top: 100px;
      left: 100px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      cursor: move;
      border-radius: 0.5rem;
      z-index: 1000;
    }

    .card-header {
      cursor: move;
    }

    .floating-table {
      position: absolute;
      top: 100px;
      left: 600px;
      background-color: white;
      padding: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      border-radius: 0.5rem;
      cursor: move;
      max-width: 900px;
    }

    table {
      table-layout: auto;
    }
    table th, table td {
      white-space: nowrap;
      overflow: visible;
      text-overflow: clip;
      max-width: none;
      vertical-align: middle;
    }

    .table-scroll-wrap {
      max-height: 400px;
      overflow-y: auto;
      overflow-x: auto;
      border: 1px solid rgba(0,0,0,.1);
      border-radius: .5rem;
      background: #fff;
    }

    #tblAlumnos {
      min-width: 1100px;
      margin-bottom: 0;
    }

    .scroll-controls {
      display: flex;
      gap: .5rem;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: .5rem;
      user-select: none;
    }

    .scroll-btn {
      width: 40px;
      height: 34px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: .5rem;
    }

    .btn-del {
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
    }

    #draggableCard {
      display: none;
    }

    .drag-handle {
      cursor: move;
    }

    @media (max-width: 992px) {
      body { height: auto; }

      .floating-card,
      .floating-table {
        position: static;
        left: auto;
        top: auto;
        max-width: 100%;
        width: calc(100% - 2rem);
        margin: 1rem auto;
        cursor: default;
      }

      .card-header,
      .drag-handle {
        cursor: default;
      }

      #tblAlumnos {
        min-width: 900px;
      }
    }
  </style>
</head>

<body>
  <div class="card floating-card bg-warning" id="draggableCard">
    <div class="card-header">Registro de Alumnos</div>
    <div class="card-body overflow-auto" style="max-height: 550px;">
      <h5 class="card-title">Formulario de Registro Académico</h5>

      <form id="fmrRegistroAlumnos">
        <div class="mb-3">
          <label class="form-label">Nombre:</label>
          <input type="text" class="form-control" id="txtnombreAlumno" placeholder="Ingresa tu nombre">
        </div>

        <div class="mb-3">
          <label class="form-label">Código:</label>
          <input type="text" class="form-control" id="txtCodigo" placeholder="Ingresa tu código">
        </div>

        <div class="mb-3">
          <label class="form-label">Departamento:</label>
          <select class="form-select" id="selectDepartamento">
            <option value="">Selecciona un departamento</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Municipio:</label>
          <select class="form-select" id="selectMunicipio">
            <option value="">Selecciona un municipio</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Fecha de Nacimiento:</label>
          <input type="date" class="form-control" id="txtFechaNacimiento">
        </div>

        <div class="mb-3">
          <label class="form-label">Teléfono:</label>
          <input type="text" class="form-control" id="txtTelefono" placeholder="Ingresa tu teléfono">
        </div>

        <div class="mb-3">
          <label class="form-label">Dirección:</label>
          <input type="text" class="form-control" id="txtdireccion" placeholder="Ingresa tu dirección">
        </div>

        <div class="mb-3">
          <label class="form-label">Sexo:</label><br>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="sexo" id="sexoF" value="Femenino">
            <label class="form-check-label" for="sexoF">Femenino</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="sexo" id="sexoM" value="Masculino">
            <label class="form-check-label" for="sexoM">Masculino</label>
          </div>
        </div>

        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-primary">Registrar</button>
          <button type="reset" class="btn btn-secondary">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
  
  <div class="floating-table" id="draggableTable">
  <div class="d-flex align-items-center justify-content-between mb-2">
    <h5 class="mb-0 drag-handle" id="tableHandle">Lista de Alumnos</h5>

    <div class="input-group w-50">
      <input type="text" class="form-control" id="txtBarradeBusqueda" placeholder="Buscar por código y departamento">
      <span class="input-group-text"><i class="bi bi-search"></i></span>
    </div>
  </div>

  <div class="table-scroll-wrap" id="tableScrollWrap">
    <table id="tblAlumnos" class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Código</th>
          <th>Departamento</th>
          <th>Municipio</th>
          <th>Fecha</th>
          <th>Sexo</th>
          <th>Teléfono</th>
          <th>Dirección</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="text-end">
    <button id="btnMostrarFormulario" class="btn btn-success mt-3">Registrar</button>
  </div>
</div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      makeDraggable("draggableCard");
      makeDraggable("draggableTable");

      const btnMostrarFormulario = document.getElementById("btnMostrarFormulario");
      btnMostrarFormulario.addEventListener("click", () => {
        const card = document.getElementById("draggableCard");
        card.style.display = "block";
      });

      const wrap = document.getElementById("tableScrollWrap");
      const btnLeft = document.getElementById("btnScrollLeft");
      const btnRight = document.getElementById("btnScrollRight");

      const SCROLL_STEP = 260;

      btnLeft.addEventListener("click", () => {
        wrap.scrollBy({ left: -SCROLL_STEP, behavior: "smooth" });
      });

      btnRight.addEventListener("click", () => {
        wrap.scrollBy({ left: SCROLL_STEP, behavior: "smooth" });
      });
    });

    function makeDraggable(id) {
      const element = document.getElementById(id);
      let offsetX = 0, offsetY = 0, isDragging = false;

      const handle = element.querySelector(".card-header") || element.querySelector(".drag-handle") || element;

      handle.addEventListener("mousedown", (e) => {
        const pos = window.getComputedStyle(element).position;
        if (pos !== "absolute" && pos !== "fixed") return;

        isDragging = true;
        offsetX = e.clientX - element.offsetLeft;
        offsetY = e.clientY - element.offsetTop;
      });

      document.addEventListener("mousemove", (e) => {
        if (isDragging) {
          element.style.left = (e.clientX - offsetX) + "px";
          element.style.top = (e.clientY - offsetY) + "px";
        }
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
      });
    }
  </script>

  <script src="departYmuncip.js"></script>
  <script src="main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
